### 闭包---和作用域链息息相关
> 闭包是指有权访问另一个函数作用域中的变量的函数

#### 古典闭包定义的闭包组成

1. 环境部分
    1. 环境
    2. 标识符列表
2. 表达式部分

#### JavaScript中闭包的组成部分

1. 环境部分
    1. 环境：函数的词法环境（执行上下文的一部分）
    2. 标识符列表：函数中用到的未声明的变量
2. 表达式部分：函数体

`我们可以认为，JavaScript 中的函数完全符合闭包的定义。它的环境部分是函数词法环境部分组成，它的标识符列表是函数中用到的未声明变量，它的表达式部分就是函数体。`

> 以上摘录自winter大神的重学前端

#### 创建闭包的常见方式

在一个函数内部创建另一个函数
```javascript
function createComparisonFunction(propertyName) {
    return function(object1, object2){

        // 内部函数访问了外部函数的propertyName属性
        var value1 = object1[propertyName];
        var value2 = object2[propertyName];
        if (value1 < value2){
            return -1;
        } else if (value1 > value2){
            return 1;
        } else {
            return 0;
        }
    };
}
```

#### 理解作用域链对闭包至关重要
> 当某个函数被调用时，会创建一个执行环境(execution context)及相应的作用域链。
使用 arguments 和其他命名参数的值来初始化函数的活动对象

>在作用域链中，外部函数的活动对象始终处于第二位，外部函数的外部函数的活动对象处于第三位，
......直至作为作用域链终点的全局执行环境。

> 作用域链本质上是一个指向变量对象的指针列表，它只引用但不实际包含变量对象

> 无论什么时候在函数中访问一个变量时，就会从作用域链中搜索具有相应名字的变量。
一般来讲，当函数执行完毕后，局部活动对象就会被销毁，内存中仅保存全局作用域(全局执行环境的变量对象)。
但是，闭包的情况又有所不同。


注意

由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。过 度使用闭包可能会导致内存占用过多，我们建议读者只在绝对必要时再考虑使用闭 包。虽然像 V8 等优化后的 JavaScript 引擎会尝试回收被闭包占用的内存，但请大家 还是要慎重使用闭包。

参考MDN: [闭包][https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures]
