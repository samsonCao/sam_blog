### 代理模式Proxy

##### 定义
由于一个对象不能直接引用另一个对象，所有需要通过代理对象在这两个对象之间起到中介作用

##### 优点

1. 隐藏真实的主体对象，保密，保护目标对象的作用。如反向代理（隐藏真是的服务器），正向代理（隐藏真实的访问者）

2. 代理模式能将代理对象与被调用对象分离，降低了系统的耦合度

##### 使用场景

1. JSONP实现跨域， img标签发消息给服务端实现数据统计

2. 保护代理：当有许多需求要向某对象发出一些请求时，可以设置保护代理，通过一些条件判断对请求进行过滤。

3. 虚拟代理：在程序中可以能有一些代价昂贵的操作。此时可以设置虚拟代理去代为执行，这里的虚拟代理便会在适合的时候（需要用到的时候）才去执行。

4. 缓存代理可以为一些开销大的运算结果提供暂时的存储，在下次运算时，如果传递进来的参数跟之前一致，则可以直接返回前面存储的运算结果。

5. 图片预加载的占位符，用loading图片代替

#### 代理模式代码实例
```javascript
<script>
      window.someCallBack = function (value) {
 		 console.log(value)
 		 // todo 拿到数据做某些事
 		}
      var script = document.createElement('script')
      script.src = 'https://www.xxx.xxx/json?callback=someCallBack'
      document.body.appendChild(script)
</script>
```

#### 与装饰者模式的区别

- 相同之处：都要对其他对象进行包装，都要事先与被包装对象相同的接口，而且都要把方法调用传递给被包装的对象。

- 不同之处：一是装饰者会对被包装对象的功能进行修改或扩充，但是代理只不过是控制对它的访问；二是被包装对象的创建方式上：装饰者模式被包装对象的实例化过程完全是独立的，而在代理模式中，被包装对象的实例化是代理的实例化过程的一部分。
